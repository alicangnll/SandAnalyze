var countryCode = {
	"US": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],
		channel_5g: {
			'20': [0, 36, 40, 44, 48, 149, 153, 157, 161, 165],
			'40': [0, 36, 40, 44, 48, 149, 153, 157, 161],
			'80': [0, 36, 40, 44, 48, 149, 153, 157, 161]
		}
	},
	"CA": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],
		channel_5g: {
			'20': [0, 36, 40, 44, 48, 149, 153, 157, 161, 165],
			'40': [0, 36, 40, 44, 48, 149, 153, 157, 161],
			'80': [0, 36, 40, 44, 48, 149, 153, 157, 161]
		}
	},
	"MX": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],
		channel_5g: {
			'20': [0, 36, 40, 44, 48, 149, 153, 157, 161, 165],
			'40': [0, 36, 40, 44, 48, 149, 153, 157, 161],
			'80': [0, 36, 40, 44, 48, 149, 153, 157, 161]
		}
	},	
	"CN": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
		channel_5g: {
			'20': [0, 149, 153, 157, 161, 165],
			'40': [0, 149, 153, 157, 161],
			'80': [0, 149, 153, 157, 161]
		}
	},
	"HK": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],
		channel_5g: {
			'20': [0, 36, 40, 44, 48, 149, 153, 157, 161, 165],
			'40': [0, 36, 40, 44, 48, 149, 153, 157, 161],
			'80': [0, 36, 40, 44, 48, 149, 153, 157, 161]
		}
	},
	"TW": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],
		channel_5g: {
			'20': [0, 149, 153, 157, 161, 165],
			'40': [0, 149, 153, 157, 161],
			'80': [0, 149, 153, 157, 161]
		}
	},
	"ID": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
		channel_5g: {
			'20': [0, 36, 40, 44, 48, 149, 153, 157, 161, 165],
			'40': [0, 36, 40, 44, 48, 149, 153, 157, 161],
			'80': [0, 36, 40, 44, 48, 149, 153, 157, 161]
		}
	},
	"TH": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],
		channel_5g: {
			'20': [0, 36, 40, 44, 48, 149, 153, 157, 161, 165],
			'40': [0, 36, 40, 44, 48, 149, 153, 157, 161],
			'80': [0, 36, 40, 44, 48, 149, 153, 157, 161]
		}
	},
	"NO": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
		channel_5g: {
			'20': [0, 36, 40, 44, 48],
			'40': [0, 36, 40, 44, 48],
			'80': [0, 36, 40, 44, 48]
		}
	},
	"GB": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
		channel_5g: {
			'20': [0, 36, 40, 44, 48],
			'40': [0, 36, 40, 44, 48],
			'80': [0, 36, 40, 44, 48]
		}
	},
	"DE": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
		channel_5g: {
			'20': [0, 36, 40, 44, 48],
			'40': [0, 36, 40, 44, 48],
			'80': [0, 36, 40, 44, 48]
		}
	},
	"RO": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
		channel_5g: {
			'20': [0, 36, 40, 44, 48],
			'40': [0, 36, 40, 44, 48],
			'80': [0, 36, 40, 44, 48]
		}
	},
	"CZ": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
		channel_5g: {
			'20': [0, 36, 40, 44, 48],
			'40': [0, 36, 40, 44, 48],
			'80': [0, 36, 40, 44, 48]
		}
	},
	"PL": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
		channel_5g: {
			'20': [0, 36, 40, 44, 48],
			'40': [0, 36, 40, 44, 48],
			'80': [0, 36, 40, 44, 48]
		}
	},
	"HU": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
		channel_5g: {
			'20': [0, 36, 40, 44, 48],
			'40': [0, 36, 40, 44, 48],
			'80': [0, 36, 40, 44, 48]
		}
	},
	"FR": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
		channel_5g: {
			'20': [0, 36, 40, 44, 48],
			'40': [0, 36, 40, 44, 48],
			'80': [0, 36, 40, 44, 48]
		}
	},
	"ES": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
		channel_5g: {
			'20': [0, 36, 40, 44, 48],
			'40': [0, 36, 40, 44, 48],
			'80': [0, 36, 40, 44, 48]
		}
	},
	"IT": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
		channel_5g: {
			'20': [0, 36, 40, 44, 48],
			'40': [0, 36, 40, 44, 48],
			'80': [0, 36, 40, 44, 48]
		}
	},
	"PT": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
		channel_5g: {
			'20': [0, 36, 40, 44, 48],
			'40': [0, 36, 40, 44, 48],
			'80': [0, 36, 40, 44, 48]
		}
	},
	"TR": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
		channel_5g: {
			'20': [0, 36, 40, 44, 48],
			'40': [0, 36, 40, 44, 48],
			'80': [0, 36, 40, 44, 48]
		}
	},
	"GR": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
		channel_5g: {
			'20': [0, 36, 40, 44, 48],
			'40': [0, 36, 40, 44, 48],
			'80': [0, 36, 40, 44, 48]
		}
	},
	"AT": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
		channel_5g: {
			'20': [0, 36, 40, 44, 48],
			'40': [0, 36, 40, 44, 48],
			'80': [0, 36, 40, 44, 48]
		}
	},
	"RU": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
		channel_5g: {
			'20': [0, 36, 40, 44, 48, 149, 153, 157, 161],
			'40': [0, 36, 40, 44, 48, 149, 153, 157, 161],
			'80': [0, 36, 40, 44, 48, 149, 153, 157, 161]
		}
	},
	"RS": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
		channel_5g: {
			'20': [0, 36, 40, 44, 48],
			'40': [0, 36, 40, 44, 48],
			'80': [0, 36, 40, 44, 48]
		}
	},
	"BA": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
		channel_5g: {
			'20': [0, 36, 40, 44, 48],
			'40': [0, 36, 40, 44, 48],
			'80': [0, 36, 40, 44, 48]
		}
	},
	"SI": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
		channel_5g: {
			'20': [0, 36, 40, 44, 48],
			'40': [0, 36, 40, 44, 48],
			'80': [0, 36, 40, 44, 48]
		}
	},
	"AU": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
		channel_5g: {
			'20': [0, 36, 40, 44, 48, 149, 153, 157, 161, 165],
			'40': [0, 36, 40, 44, 48, 149, 153, 157, 161],
			'80': [0, 36, 40, 44, 48, 149, 153, 157, 161]
		}
	},
	"ZA": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
		channel_5g: {
			'20': [0, 36, 40, 44, 48, 149, 153, 157, 161, 165],
			'40': [0, 36, 40, 44, 48, 149, 153, 157, 161],
			'80': [0, 36, 40, 44, 48, 149, 153, 157, 161]
		}
	},
	"SA": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
		channel_5g: {
			'20': [0, 36, 40, 44, 48],
			'40': [0, 36, 40, 44, 48],
			'80': [0, 36, 40, 44, 48]
		}
	},
	"AE": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
		channel_5g: {
			'20': [0, 36, 40, 44, 48],
			'40': [0, 36, 40, 44, 48],
			'80': [0, 36, 40, 44, 48]
		}
	},
	"BR": {
		channel: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
		channel_5g: {
			'20': [0, 36, 40, 44, 48, 149, 153, 157, 161, 165],
			'40': [0, 36, 40, 44, 48, 149, 153, 157, 161],
			'80': [0, 36, 40, 44, 48, 149, 153, 157, 161]
		}
	}
};
$(function () {
	//initHtml();
	getValue();
	//initEvent();
	$("#adv_country").on("change", getBandWidthList);
	$("#adv_mode, #adv_mode_5g").on("change", getBandWidthList);
	$("#submit").on("click", preSubmit);
	$("#adv_band_5g").on("change", changeBandwidth);
	top.loginOut();
	top.$(".main-dailog").removeClass("none");
	top.$(".save-msg").addClass("none");
});


function getBandWidthList() {
	var mode_24g = $("#adv_mode").val(),
		mode_5g = $("#adv_mode_5g").val(),
		country = $("#adv_country").val(),
		bang_24g_init = $("#adv_band").val(),
		bang_5g_init = $("#adv_band_5g").val();


	//2.4g 频宽受到网络模式影响 
	if (mode_24g == "bgn" || mode_24g == "n only") {
		$("#adv_band").html('<option value="20">20</option><option value="40">40</option><option value="auto">20/40</option>');
	} else {
		$("#adv_band").html('<option value="20">20</option>').val("20");
	}

	$("#adv_band").val(bang_24g_init);
	if ($("#adv_band").val() != bang_24g_init) {
		$("#adv_band").val(bang_24g_init);
	}

	//5g 频宽受到国家、5g模式影响
	if (mode_5g == "a") {
		$("#adv_band_5g").html('<option value="20">20</option>');
	//} else if (mode_5g == "an" || country == "ID") {
	} else if (mode_5g == "an") {
		$("#adv_band_5g").html('<option value="20">20</option><option value="40">40</option><option value="auto">20/40</option>');
	} else {
		$("#adv_band_5g").html('<option value="20">20</option><option value="40">40</option><option value="80">80</option><option value="auto">20/40/80</option>');
	}

	if ($("#adv_band_5g option[value="+bang_5g_init+"]").length == 0) {
		$("#adv_band_5g").val(40);
	} else {
		$("#adv_band_5g").val(bang_5g_init);
	}

	changeBandwidth();
}

function changeBandwidth() {

	var channel,
		channel_5g,
		len_5g,
		i = 0,
		bandwidth,
		bandwidth_5g,
		str = "",
		adv_channel = $("#adv_channel").val(),
		adv_channel_5g = $("#adv_channel_5g").val();


	var country = $("#adv_country").val();


	bandwidth = $("#adv_band").val();
	channel = countryCode[country].channel;
	len = channel.length;
	for (i = 0; i < len; i++) {
		if (i == 0) {
			str += "<option value='0'>" + _("Auto") + "</option>";
		} else {
			//str += "<option value='" + channel[i] + "'>" + _("Channel") + " " + channel[i] + "</option>";
			str += "<option value='" + channel[i] + "'>" + " " + channel[i] + "</option>";
		}
	}
	$("#adv_channel").html(str);
	if ($("#adv_channel option[value="+adv_channel+"]").length == 0) {
		$("#adv_channel").val(0);
	} else {
		$("#adv_channel").val(adv_channel);
	}

	str = "";
	bandwidth_5g = $("#adv_band_5g").val();
	bandwidth_5g = (bandwidth_5g == "auto" ? "80" : bandwidth_5g);
	channel_5g = countryCode[country].channel_5g[bandwidth_5g];
	len_5g = channel_5g.length;
	for (i = 0; i < len_5g; i++) {
		if (i == 0) {
			str += "<option value='0'>" + _("Auto") + "</option>";
		} else {
			//str += "<option value='" + channel_5g[i] + "'>" + _("Channel") + " " + channel_5g[i] + "</option>";
			str += "<option value='" + channel_5g[i] + "'>" + " " + channel_5g[i] + "</option>";
		}
	}
	$("#adv_channel_5g").html(str);
	if ($("#adv_channel_5g option[value="+adv_channel_5g+"]").length == 0) {
		$("#adv_channel_5g").val("0");
	} else {
		$("#adv_channel_5g").val(adv_channel_5g);
	}
}


function getValue() {
	$.getJSON("goform/WifiRadioGet?" + Math.random(), initValue);
}

function initValue(obj) {
	var bandWidth_5g;

	top.$(".main-dailog").removeClass("none");
	top.$("iframe").removeClass("none");
	top.$(".loadding-page").addClass("none");

	//inputValue(obj);
	$("#adv_country").val(obj.adv_country);
	$("#adv_mode").val(obj.adv_mode);
	$("#adv_mode_5g").val(obj.adv_mode_5g);
	getBandWidthList();

	$("#adv_band").val(obj.adv_band);
	$("#adv_band_5g").val(obj.adv_band_5g);

	changeBandwidth();
	$("#adv_channel").val(obj.adv_channel);
	$("#adv_channel_5g").val(obj.adv_channel_5g);

	getBandWidthList();
}

function preSubmit() {
	var subData = $("#wireless").serialize();
	$.post("goform/WifiRadioSet", subData, callback);
}

function callback(str) {
	if (!top.isTimeout(str)) {
		return;
	}
	var num = $.parseJSON(str).errCode;
	top.showSaveMsg(num);
}